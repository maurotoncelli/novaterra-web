---
// src/Components/home/HomeServices.astro
import { homeServices } from '../../data/homeContent';
import { servicesList } from '../../data/servicesData';
import SectionHeader from '../Ui/SectionHeader.astro';

const imageBySlug = new Map(servicesList.map((s) => [s.slug, s.image]));
---

<section class="container mx-auto px-[5vw] pb-10 md:pb-16 relative z-10">
  <SectionHeader subtitle="Cosa Facciamo" title="Ingegneria del Paesaggio" />

  <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-[1px] bg-white/10 border border-white/10 reveal-fx">
    {homeServices.map((srv) => {
      const image = imageBySlug.get(srv.slug);

      return (
        <a
          href={srv.slug}
          class="bg-nova-bg p-5 md:p-12 hover:bg-nova-surface transition-colors duration-300 group block"
        >
          {/* Desktop-only service preview image (same as /servizi) */}
          {image && (
            <div class="hidden md:block mb-6 overflow-hidden border border-white/10 bg-white/5">
              <div class="aspect-[3/2] w-full">
                <img
                  src={image}
                  alt={srv.title}
                  loading="lazy"
                  decoding="async"
                  class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-[1.04]"
                />
              </div>
            </div>
          )}

          <span class="text-[1.02rem] md:text-[1.5rem] font-bold text-white group-hover:text-nova-accent transition-colors block mb-1 md:mb-2 leading-tight">
            {srv.num} / {srv.title}
          </span>
          <span class="hidden md:inline-block text-[0.75rem] font-bold tracking-[0.1em] text-nova-muted group-hover:text-white transition-colors uppercase">
            APPROFONDISCI &rarr;
          </span>
        </a>
      );
    })}
  </div>
</section>

