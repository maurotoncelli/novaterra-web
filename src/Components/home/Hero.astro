---
// src/Components/Home/Hero.astro
import { heroData } from '../../data/homeContent';
---

<main class="relative w-full h-screen overflow-hidden flex items-center justify-center bg-nova-bg" data-parallax-section="hero">
	<!-- Background con Parallax -->
	<div class="absolute inset-0 z-0 overflow-hidden">
		<!-- Use a background layer like the demo (lets parallax reveal black edges naturally) -->
		<div
			class="hero-bg parallax-img"
			data-speed="0.5"
			data-parallax-dir="up"
		>
			<!-- Fallback image (kept behind the video) -->
			<div class="hero-fallback" style={`background-image: url('${heroData.bgImage}');`}></div>

			<!-- Streamable video background (autoplay + loop) -->
			<iframe
				class="hero-video-embed"
				src="https://streamable.com/e/cohr26?autoplay=1&loop=1"
				title="Novaterra Hero Video"
				allow="autoplay; fullscreen"
				allowfullscreen
				frameborder="0"
			></iframe>
		</div>
		<!-- Match site background hue (avoid pure-black revealed band) -->
		<div class="absolute inset-0" style="background: rgba(18, 17, 16, 0.15);"></div>
	</div>

	<!-- Contenuto Centrale -->
	<div 
		id="hero-content" 
		class="relative z-10 text-center px-4 max-w-[900px] mx-auto mt-12"
	>
		<span class="hero-reveal hero-reveal--subtitle block text-nova-accent text-[0.85rem] uppercase tracking-[0.2em] mb-8 font-bold">
			{heroData.subtitle}
		</span>
		
		<h1 class="hero-reveal hero-reveal--title text-[clamp(3rem,8vw,7rem)] font-extrabold leading-[1] tracking-[-0.03em] text-white mb-8">
			{heroData.titleMain}<br>
			<span class="font-[200] not-italic text-white uppercase">{heroData.titleAccent}</span>.
		</h1>

		<p class="hero-reveal hero-reveal--desc max-w-[600px] mx-auto text-white/90 text-[1.1rem] font-light leading-[1.7] mb-12">
			{heroData.description}
		</p>

		<div class="hero-reveal hero-reveal--cta flex flex-col md:flex-row gap-[20px] justify-center mb-16 md:mb-20">
			<a href={heroData.primaryCTA.link} class="py-[15px] px-[35px] bg-white/10 backdrop-blur-md border border-white/60 text-white text-[0.9rem] uppercase tracking-[0.2em] font-bold hover:bg-nova-accent hover:border-nova-accent transition-all duration-300">
				{heroData.primaryCTA.text}
			</a>
			<a href={heroData.secondaryCTA.link} class="py-[15px] px-[35px] bg-white/10 backdrop-blur-md border border-white/60 text-white text-[0.9rem] uppercase tracking-[0.2em] font-bold hover:bg-nova-accent hover:border-nova-accent transition-all duration-300">
				{heroData.secondaryCTA.text}
			</a>
		</div>
	</div>

	<!-- Scroll Indicator -->
	<div id="hero-scroll" class="scroll-indicator absolute bottom-6 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 z-20">
		<div class="mouse-icon">
			<div class="mouse-wheel"></div>
		</div>
		<span class="scroll-text-lbl">SCROLL</span>
	</div>
</main>

<style>
	/* Hero cinematic reveal (delay so the user sees the image/video first) */
	.hero-reveal {
		opacity: 0;
		transform: translateY(18px);
		filter: blur(10px);
		will-change: transform, opacity, filter;
	}

	/* Start hero reveals only when site is ready (post-preloader) */
	:global(html.site-ready) .hero-reveal {
		animation: heroFadeUp 1.25s var(--ease-out-expo, cubic-bezier(0.19,1,0.22,1)) forwards;
	}

	:global(html.site-ready) .hero-reveal--subtitle { animation-delay: 0.35s; }
	:global(html.site-ready) .hero-reveal--title { animation-delay: 0.55s; }
	:global(html.site-ready) .hero-reveal--desc { animation-delay: 0.80s; }
	:global(html.site-ready) .hero-reveal--cta { animation-delay: 1.00s; }

	@keyframes heroFadeUp {
		to { opacity: 1; transform: translateY(0); filter: blur(0px); }
	}

	/* Scroll indicator (match demo feel) */
	.scroll-indicator {
		opacity: 0;
	}
	
	:global(html.site-ready) .scroll-indicator {
		animation: heroFadeIn 1s 1.2s forwards;
	}

	/* Hide scroll indicator on short viewports to prevent overlap */
	@media (max-height: 700px) {
		.scroll-indicator {
			display: none;
		}
	}

	@keyframes heroFadeIn {
		to { opacity: 1; }
	}

	.mouse-icon {
		width: 30px;
		height: 50px;
		border: 2px solid rgba(255, 255, 255, 0.5);
		border-radius: 25px;
		position: relative;
	}

	.mouse-wheel {
		width: 4px;
		height: 8px;
		background: white;
		position: absolute;
		top: 8px;
		left: 50%;
		transform: translateX(-50%);
		border-radius: 2px;
		animation: scrollWheel 2s infinite;
	}

	@keyframes scrollWheel {
		0% { top: 8px; opacity: 1; }
		100% { top: 25px; opacity: 0; }
	}

	.scroll-text-lbl {
		font-size: 0.6rem;
		letter-spacing: 0.2em;
		text-transform: uppercase;
		color: rgba(255, 255, 255, 0.5);
	}

	@media (prefers-reduced-motion: reduce) {
		.hero-reveal,
		.scroll-indicator,
		.mouse-wheel {
			animation: none !important;
		}

		.hero-reveal,
		.scroll-indicator {
			opacity: 1 !important;
			transform: none !important;
		}
	}

	/* Demo-like hero bg treatment */
	.hero-bg {
		position: absolute;
		inset: 0;
		background: var(--nova-bg);
		transform: scale(1.1);
		will-change: transform;
		overflow: hidden;
	}

	.hero-fallback {
		position: absolute;
		inset: 0;
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
		filter: brightness(0.9) contrast(1.08);
		transform: scale(1.02);
	}

	/* Video sits on top of the fallback background image (cover behavior) */
	.hero-video-embed {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		/* Cover behavior for 16:9 video */
		width: 100vw;
		height: 56.25vw; /* 9/16 * 100 */
		min-width: 177.78vh; /* 16/9 * 100 */
		min-height: 100vh;
		border: 0;
		/* Keep hero content clickable */
		pointer-events: none;
		filter: brightness(0.9) contrast(1.08);
	}

	/* Accessibility: respect reduced motion by falling back to the image */
	@media (prefers-reduced-motion: reduce) {
		.hero-video-embed {
			display: none;
		}
	}
</style>







